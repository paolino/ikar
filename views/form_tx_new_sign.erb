<%
  # wallets = wallets
  url_path = request.env['PATH_INFO'].to_s
  shelley_ep = "/sign-tx-shelley"
  shared_ep = "/sign-tx-shared"
  wid = params[:wid] if params[:wid]
%>

<script>
function goBack() {
  window.history.back();
}
</script>
<div class="list-group">
  <div class="list-group-item">
    Sign Transaction ✍️
    | <small><a href="#" onclick="goBack()">
        go back
      </a></small>
  </div>
  <div class="list-group-item"  >
    <% if decoded_tx && decoded_tx['fee'] %>
      <b>Fee: </b> <%= "#{as_ada decoded_tx['fee']['quantity']}" %>
      <br/>
      <br/>
    <% end %>
    <form action="<%= pick_post_ep(url_path, nil, shelley_ep, shared_ep) %>"
        method="POST">
      <div class="form-group">
        <label for="pass">Passphrase</label>
        <input type="text" class="form-control" name="pass" id="pass" placeholder="Passphrase" value="Secure Passphrase">
      </div>
      <input type="hidden" name="transaction" value="<%= tx['transaction'] %>"/>
      <input type="hidden" name="wid" value="<%= wid %>"/>
      <button type="submit" class="btn btn-success">Sign</button>
      <a class="btn btn-secondary" href="#" role="button" onclick="goBack()">Back</a>
    </form>
  </div>
  <% if tx %>
  <div class="list-group-item"  >
    <details>
      <summary>Transaction details</summary>
        <code>
          <span title="Encoded transaction">🔒</span>
          <small id="tx">
              <%= response2table(tx) %>
          </small>
          <% if decoded_tx %>
          <span title="Decoded transaction">👀</span>
            <small id="decoded_tx">
                <%= response2table(decoded_tx) %>
            </small>
          <% end %>
        </code>
    </details>

  </div>
  <% end %>
</div>
